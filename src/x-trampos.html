<link rel="import" href="../app/bower_components/polymer-jsonp/polymer-jsonp.html">
<link rel="import" href="../app/bower_components/polymer-ajax/polymer-ajax.html">
<link rel="import" href="../app/bower_components/polymer-ajax/polymer-xhr.html">

<polymer-element name="x-trampos" attributes="itensPerRow url">
    <template>

        <style>
            li {
                list-style: none;
                padding: 10px;
            }

            p {
                font-size: 16px;
                font-weight: bold;
                clear: right;
            }

            span {
                font-size: 12px;
            }
        </style>

        <polymer-ajax id="ajax" auto url="{{url}}" handleAs="json"></polymer-ajax>

        <div class="lista">
            <ul>
                <li id="{{item.id}}">VAGAS: trampos.co & lorem ipsum sid</li>
                <template id="jobs" repeat="{{item in jobs}}" index="i">
                    <li>
                        <p>{{item.name}} </p>
                        <span>{{item.company_name}} </span>
                    </li>
                </template>
                <li> --- logo trampos aqui --- </li>
            </ul>
        </div>
    
    </template>
    <script>
        Polymer('x-trampos', {
            
            itensPerRow: 5,

            url : '',

            jobs: [],

            ready: function () {
                this.$.jobs.model = this.jobs;
                this.$.ajax.addEventListener('polymer-response',
                    function (e) {
                        console.log(e.detail.response);
                        this.jobs = {jobs: e.detail.response};
                        this.$.jobs.model = {jobs: e.detail.response};
                        this.fire('x-trampos-load', {response: e.detail.response});
                    }.bind(this)
                );
            }
        });
    </script>
</polymer-element>